version: 1
applications:
  - backend:
      phases:
        build:
          commands:
            - pip install --upgrade pip
            - pip install -r requirements.txt
        post_build:
          commands:
            - echo "Build completed successfully"
      start:
        command: >-
          python -m gunicorn 
          --worker-class eventlet 
          -w 1 
          --bind 0.0.0.0:8000 
          wsgi:wsgi 
          --access-logfile - 
          --error-logfile - 
          --log-level info
      artifacts:
        baseDirectory: .
        files:
          - '**/*'
          - requirements.txt
          - wsgi.py
          - run.py
          - app/**/*
      cache:
        paths:
          - '/root/.cache/pip/**/*'
    frontend:
      phases:
        build:
          commands:
            - echo "No frontend build required"
      artifacts:
        baseDirectory: .
        files:
          - '**/*'
    appRoot: .
    buildSpec:
      timeoutInMinutes: 10